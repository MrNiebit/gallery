(this["webpackJsonpreact-demo"]=this["webpackJsonpreact-demo"]||[]).push([[0],{109:function(A,t,e){"use strict";e.r(t);var i=e(1),g=e.n(i),n=e(4),r=e.n(n),h=(e(43),e(5)),c=[{alt:"\u817e\u8baf\u5927\u53a6",height:5120,size:{height:5120,width:3840},src:"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/14.jpg",title:"\u817e\u8baf\u5927\u53a6",width:3840},{alt:"\u767e\u5ea6",height:5120,size:{height:5120,width:3840},src:"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/15.jpg",title:"\u767e\u5ea6",width:3840},{alt:"\u7f51\u6613",height:5120,size:{height:5120,width:3840},src:"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/19.jpg",title:"\u7f51\u6613",width:3840},{alt:"\u7f51\u4e0a\u6284\u5199\u7684\u57ce\u5357\u65e7\u4e8b",height:5120,size:{height:5120,width:3840},src:"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/16.jpg",title:"\u7f51\u4e0a\u6284\u5199\u7684\u57ce\u5357\u65e7\u4e8b",width:3840},{alt:"\ud83d\ude02\uff0c\u7528Python\u5199\u7684\u6570\u7801\u517d",height:3840,size:{height:3840,width:5120},src:"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/17.jpg",title:"\u6570\u7801\u5b9d\u8d1d\u7535\u5f71\u3001\u6ca1\u60f3\u5230\u6570\u7801\u5b9d\u8d1d\u4f7f\u7528Pyhton\u5199\u7684",width:5120},{alt:"\u7b2c\u4e00\u672cMac",height:5120,size:{height:5120,width:3840},src:"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/18.jpg",title:"\u7b2c\u4e00\u672cmac\uff0c\u76ee\u524dm1\u82af\u7247\u8fd8\u662f\u6709\u5f88\u591a\u517c\u5bb9\u95ee\u9898\u7684",width:3840},{alt:"\u591c\u665a\u7684\u516c\u4ea4\u7ad9",height:2448,size:{height:2448,width:3264},src:"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/8.jpg",title:"\u591c\u665a\u7684\u516c\u4ea4\u7ad9",width:3264},{alt:"\u5199\u798f",height:2340,size:{height:2340,width:1080},src:"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/9.jpg",title:"\u96c6\u4e94\u798f",width:1080},{alt:"\u9694\u79bb...",height:5120,size:{height:5120,width:3840},src:"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/12.jpg",title:"\u9694\u79bb...",width:3840},{alt:"\u624b\u673a\u62cd\u51fa\u6765 \u9ec4\u8272\u5c31\u6ca1\u4e86",height:3840,size:{height:3840,width:5120},src:"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/13.jpg",title:"\u6c99\u5c18\u66b4 ",width:5120},{alt:"\u4e0b\u96ea\u4e86\u2744\ufe0f",height:5120,size:{height:5120,width:3840},src:"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/11.jpg",title:"\u4e0b\u96ea\u4e86\u2744\ufe0f",width:3840},{alt:"\u7af9\u5b50\ud83c\udf8b",height:3840,size:{height:3840,width:5120},src:"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/10.jpg",title:"\u606d\u738b\u5e9c\u7684\u7af9\u5b50",width:5120},{alt:"\u8d70",height:887,size:{height:887,width:1920},src:"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/4.jpg",title:"\u540e\u5382\u6751\u8def",width:1920},{alt:"\ud83d\udc3b",height:3840,size:{height:3840,width:5120},src:"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/5.jpg",title:"\u718a\ud83d\udc3b",width:5120},{alt:"\ud83d\udc3b",height:3840,size:{height:3840,width:5120},src:"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/6.jpg",title:"\u718a\ud83d\udc3b",width:5120},{alt:"...",height:3840,size:{height:3840,width:5120},src:"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/3.jpg",title:"...",width:5120},{alt:"\u5f69\u8679",height:3840,size:{height:3840,width:5120},src:"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/2.jpg",title:"\ud83c\udf08",width:5120}],o=e(21),a=e(6),s=function(A,t){return t||(t=0),Number("".concat(Math.round("".concat(A,"e").concat(t)),"e-").concat(t))},l=["iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mO0Scz4DwAD7AIGykeHNgAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNsfP3lPwAHtgNhjbed3QAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mO08+/9DwAECAIbYvarOwAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mPUSjf9DwADUAHH2R4+qQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mPsmL/9PwAGdALfLLTZgwAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mMM2FD3HwAFVQJ/wQSakQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOcUtf+HwAF4QKaLYURggAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mO007D9DwAC8wGkgAj2wQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mPk7Z/6HwAEFAIygk/bbQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM85i3/HwAFQAIxwDfEwwAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mMU9Hj3HwAEAQJI0J8X3wAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNUk+f6DwACEgFQ4cywdAAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOcd/rmfwAHlANDxXJFGwAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNsSun9DwAFVwJ0Dslp5gAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNMMSz/DwAEGgINf5zfKgAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNcVZn/HwAF+gKTwpRdtAAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNcVZn/HwAF+gKTwpRdtAAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mN0z4z6DwAEFAILQQRF+gAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNMnnr4PwAF2gK8g2AjSgAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/WT+fwAI3wN/ghaxIAAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOsyAz6DwAEyAI0CG2DPQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOM3dv8HwAFugKeFHNe2gAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOsLSv4DwAFPwJkf7xuOwAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNstk38DwAEjgIiTpcmsQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/7/wPwAI5ANwEHGVPQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkyuj5DwADYQH3Gb9KdwAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mO8cXX9fwAIRgNdOpasaAAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mN80S37HwAGhAKRsld48QAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM85tf3HwAGJwKj3F8CBQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mN8rhn2HwAFzAJnxf9sDQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM8fP/ufwAIbAOAdKkwIAAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM85tf3HwAGJwKj3F8CBQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mMMbnrxHwAFqwK+oiXE3gAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOcmvfiPwAGdwLsInOerQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOcI9v1HwAE5AJEQOnd/AAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM03nvtPwAFuALHzaThLAAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOsLSv4DwAFPwJkf7xuOwAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNMter+DwAEYQIr1DLJIQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP81nPmPwAIHQNPG1c/KwAAAABJRU5ErkJggg=="].map((function(A){return"data:image/png;base64,"+A})),E=function(){return l[Math.floor(Math.random()*l.length)]},w=e(2);function U(A){var t=A.photos,e=A.onClick,n=A.margin,r=A.onLoad,c=Object(i.useState)(0),l=Object(h.a)(c,2),U=l[0],d=l[1],f=Object(i.useRef)(null);Object(i.useLayoutEffect)((function(){var A=null,t=new o.default((function(t){var e=t[0].contentRect.width;U!==e&&(A=window.requestAnimationFrame((function(){d(Math.floor(e))})))}));return t.observe(f.current),function(){t.disconnect(),window.cancelAnimationFrame(A)}}));var R=Object(i.useMemo)((function(){var A=function(A){var t=1;return A>=500&&(t=2),A>=900&&(t=3),A>=1500&&(t=4),A>=2200&&(t=5),A>=3e3&&(t=6),A>=3800&&(t=7),A>=4500&&(t=8),A>=5300&&(t=9),t}(U),e=function(A){for(var t=A.photos,e=A.columns,i=A.containerWidth,g=A.margin,n=(i-2*g*e)/e,r=t.map((function(A){var t=A.height/A.width*n;return Object(a.a)(Object(a.a)({},A),{},{width:s(n,1),height:s(t,1)})})),h=[],c=[],o=0;o<e;o++)h[o]=s(o*(n+2*g),1),c[o]=0;return r.map((function(A){var t=c.reduce((function(A,t,e){return t<c[A]?e:A}),0);A.top=c[t],A.left=h[t],c[t]=c[t]+A.height+2*g;var e=c.reduce((function(A,t,e){return t>c[A]?e:A}),0);return A.containerHeight=c[e],A}))}({containerWidth:U-1,columns:A,margin:n,photos:t}),i={position:"relative"};return e.length>0&&(i.height=e[e.length-1].containerHeight),[e,i]}),[U,n,t]),J=Object(h.a)(R,2),u=J[0],B=J[1],m=Object(i.useCallback)((function(A,i){var g=i.index;e(A,{index:g,photo:t[g],previous:t[g-1]||null,next:t[g+1]||null})}),[e,t]),p=Object(i.useMemo)((function(){return Array.from({length:t.length},(function(){return g.a.createRef()}))}),[t.length]);Object(i.useEffect)((function(){r(p.map((function(A){return A.current})))}),[r,p]);var O=Object(i.useMemo)((function(){return Array.from({length:t.length},E)}),[t.length]);return Object(w.jsx)("div",{id:"react-gallery",ref:f,style:B,children:u.map((function(A,t){var e=A.src,i=A.top,g=A.left,r=A.width,h=A.height,c=A.title,o=A.alt,a=O[t],s={position:"absolute",top:i,left:g,width:r,height:h,margin:n,background:"url(".concat(a,")")};return Object(w.jsxs)("div",{className:"react-photo",style:s,onClick:function(e){m(e,{photo:A,index:t})},children:[Object(w.jsx)("img",{ref:p[t],src:a,"data-original":e,width:r,height:h,alt:o,title:c}),Object(w.jsx)("span",{children:c})]},e)}))})}U.defaultProps={margin:8};var d=g.a.memo(U),f=e(13);function R(A){var t=A.viewerIsOpen,e=A.photos,i=A.currentPhoto,g=A.closeLightbox;return Object(w.jsx)(f.b,{children:t?Object(w.jsx)(f.a,{onClose:g,children:Object(w.jsx)(f.c,{currentIndex:i,views:e.map((function(A){var t=A.src,e=A.title,i=A.size,g=i.height;return{src:t,caption:e,width:i.width,height:g}}))})}):null})}var J=g.a.memo(R);var u=function(){return Object(w.jsxs)("footer",{children:[Object(w.jsx)("span",{children:"\xa9 "})," 2021 ",Object(w.jsx)("a",{href:"https://tomotoes.com/",target:"blank",children:"TOMOTOES.COM"})]})};var B=function(){return Object(w.jsxs)("header",{children:["  ",Object(w.jsx)("span",{children:"\u5e95\u90e8\u539f\u4f5c\u8005\u5730\u5740  \u2003 \u672c\u7ad9\u6e90\u7801\u6765\u81ea\u539f\u4f5c\u8005\u7684map\u6587\u4ef6\u3002"}),Object(w.jsx)("span",{children:"@"})," ",Object(w.jsx)("a",{href:"https://blog.lacknb.cn",children:" https: //blog.lacknb.cn"})]})},m=e(38);function p(A){var t=A.getBoundingClientRect(),e=window.innerHeight||document.documentElement.clientHeight,i=window.innerWidth||document.documentElement.clientWidth,g=t.top<=e&&t.top+t.height>=0,n=t.left<=i&&t.left+t.width>=0;return!(!g||!n)||t.left>=0&&t.top>=0&&t.left+t.width<=i&&t.top+t.height<=e}function O(A){if(A&&A.length&&!A.every((function(A){return!A}))){var t=Array.from({length:A.length}),e=function(A,t){var e,i,g;return function(){var n=this,r=arguments;if(!e)return e=!0,A.apply(n,r),void(g=Date.now());clearTimeout(i),i=setTimeout((function(){Date.now()-g>=t&&(A.apply(n,r),g=Date.now())}),Math.max(t-(Date.now()-g),0))}}(g,120);window.addEventListener("scroll",e,!1),setTimeout(g,0)}function i(A,e){var i=new Image,g=A.dataset.original;i.src=g,i.onload=function(){A.classList.add("loaded"),A.src=g,t[e]=!0},i.onerror=function(){t[e]=!0}}function g(){if(t.every((function(A){return!!A})))window.removeEventListener("scroll",e);else for(var g=0;g<A.length;++g)!t[g]&&p(A[g])&&i(A[g],g)}}var j,S=(j=c,function(){var A=document.createElement("canvas");return!(!A.getContext||!A.getContext("2d"))&&0==A.toDataURL("image/webp").indexOf("data:image/webp")}()?j.map((function(A){var t=A.src,e=Object(m.a)(A,["src"]);return Object(a.a)(Object(a.a)({},e),{},{src:t.replace(/((.jpg)|(.jpeg)|(.png))$/,".webp")})})):j);var b=function(){var A=Object(i.useState)(0),t=Object(h.a)(A,2),e=t[0],g=t[1],n=Object(i.useState)(!1),r=Object(h.a)(n,2),c=r[0],o=r[1],a=Object(i.useCallback)((function(A,t){t.photo;var e=t.index;g(e),o(!0)}),[]),s=Object(i.useCallback)((function(){g(0),o(!1)}),[]);return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(B,{}),Object(w.jsx)(d,{photos:S,onLoad:O,onClick:a}),Object(w.jsx)(J,{photos:S,viewerIsOpen:c,currentPhoto:e,closeLightbox:s}),Object(w.jsx)(u,{})]})};r.a.render(Object(w.jsx)(b,{}),document.getElementById("root"))},43:function(A,t,e){}},[[109,1,2]]]);
//# sourceMappingURL=main.57efeab4.chunk.js.map