{"version":3,"sources":["photos.js","components/Gallery/utils/round.js","components/Gallery/utils/background.js","components/Gallery/index.js","components/Gallery/layouts/columns.js","components/Lightbox.js","components/Footer.js","components/Header.js","utils.js","App.js","index.js"],"names":["photos","round","value","decimals","Number","Math","colors","map","color","getRandomColor","floor","random","length","Gallery","onClick","margin","onLoad","useState","containerWidth","setContainerWidth","galleryEl","useRef","useLayoutEffect","animationFrameID","observer","ResizeObserver","entries","newWidth","contentRect","width","window","requestAnimationFrame","observe","current","disconnect","cancelAnimationFrame","useMemo","columns","computeDynamicColumns","computedPhotos","colWidth","photosWithSizes","photo","newHeight","height","colLeftPositions","colCurrTopPositions","i","smallestCol","reduce","acc","item","top","left","tallestCol","containerHeight","computeColumnLayout","galleryStyle","position","handleClick","useCallback","event","index","previous","next","refs","Array","from","React","createRef","useEffect","bgColors","id","ref","style","src","title","alt","bgColor","background","className","data-original","defaultProps","memo","Lightbox","viewerIsOpen","currentPhoto","closeLightbox","onClose","currentIndex","views","size","caption","Footer","href","target","Header","isElementInViewport","el","rect","getBoundingClientRect","windowHeight","innerHeight","document","documentElement","clientHeight","windowWidth","innerWidth","clientWidth","vertInView","horInView","lazyLoad","images","every","image","hadLoadSymbol","lazyLoadEvent","fn","wait","inThrottle","lastFn","lastTime","context","this","args","arguments","apply","Date","now","clearTimeout","setTimeout","max","throttle","processImages","addEventListener","loadImage","img","Image","dataset","original","onload","classList","add","onerror","removeEventListener","filteredPhotos","canvas","createElement","getContext","toDataURL","indexOf","canUseWebP","rest","replace","App","setCurrentPhoto","setViewerIsOpen","openLightbox","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.57efeab4.chunk.js","sourcesContent":["const photos = [{\"alt\":\"腾讯大厦\",\"height\":5120,\"size\":{\"height\":5120,\"width\":3840},\"src\":\"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/14.jpg\",\"title\":\"腾讯大厦\",\"width\":3840},{\"alt\":\"百度\",\"height\":5120,\"size\":{\"height\":5120,\"width\":3840},\"src\":\"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/15.jpg\",\"title\":\"百度\",\"width\":3840},{\"alt\":\"网易\",\"height\":5120,\"size\":{\"height\":5120,\"width\":3840},\"src\":\"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/19.jpg\",\"title\":\"网易\",\"width\":3840},{\"alt\":\"网上抄写的城南旧事\",\"height\":5120,\"size\":{\"height\":5120,\"width\":3840},\"src\":\"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/16.jpg\",\"title\":\"网上抄写的城南旧事\",\"width\":3840},{\"alt\":\"😂，用Python写的数码兽\",\"height\":3840,\"size\":{\"height\":3840,\"width\":5120},\"src\":\"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/17.jpg\",\"title\":\"数码宝贝电影、没想到数码宝贝使用Pyhton写的\",\"width\":5120},{\"alt\":\"第一本Mac\",\"height\":5120,\"size\":{\"height\":5120,\"width\":3840},\"src\":\"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/18.jpg\",\"title\":\"第一本mac，目前m1芯片还是有很多兼容问题的\",\"width\":3840},{\"alt\":\"夜晚的公交站\",\"height\":2448,\"size\":{\"height\":2448,\"width\":3264},\"src\":\"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/8.jpg\",\"title\":\"夜晚的公交站\",\"width\":3264},{\"alt\":\"写福\",\"height\":2340,\"size\":{\"height\":2340,\"width\":1080},\"src\":\"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/9.jpg\",\"title\":\"集五福\",\"width\":1080},{\"alt\":\"隔离...\",\"height\":5120,\"size\":{\"height\":5120,\"width\":3840},\"src\":\"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/12.jpg\",\"title\":\"隔离...\",\"width\":3840},{\"alt\":\"手机拍出来 黄色就没了\",\"height\":3840,\"size\":{\"height\":3840,\"width\":5120},\"src\":\"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/13.jpg\",\"title\":\"沙尘暴 \",\"width\":5120},{\"alt\":\"下雪了❄️\",\"height\":5120,\"size\":{\"height\":5120,\"width\":3840},\"src\":\"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/11.jpg\",\"title\":\"下雪了❄️\",\"width\":3840},{\"alt\":\"竹子🎋\",\"height\":3840,\"size\":{\"height\":3840,\"width\":5120},\"src\":\"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/10.jpg\",\"title\":\"恭王府的竹子\",\"width\":5120},{\"alt\":\"走\",\"height\":887,\"size\":{\"height\":887,\"width\":1920},\"src\":\"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/4.jpg\",\"title\":\"后厂村路\",\"width\":1920},{\"alt\":\"🐻\",\"height\":3840,\"size\":{\"height\":3840,\"width\":5120},\"src\":\"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/5.jpg\",\"title\":\"熊🐻\",\"width\":5120},{\"alt\":\"🐻\",\"height\":3840,\"size\":{\"height\":3840,\"width\":5120},\"src\":\"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/6.jpg\",\"title\":\"熊🐻\",\"width\":5120},{\"alt\":\"...\",\"height\":3840,\"size\":{\"height\":3840,\"width\":5120},\"src\":\"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/3.jpg\",\"title\":\"...\",\"width\":5120},{\"alt\":\"彩虹\",\"height\":3840,\"size\":{\"height\":3840,\"width\":5120},\"src\":\"https://cdn.jsdelivr.net/gh/MrNiebit/life@master/past/2.jpg\",\"title\":\"🌈\",\"width\":5120}]; export default photos","export const round = (value, decimals) => {\n  if (!decimals) decimals = 0\n  return Number(`${Math.round(`${value}e${decimals}`)}e-${decimals}`)\n}\n","const prefix = 'data:image/png;base64,'\n\nconst white = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII='\nconst green = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOM3dv8HwAFugKeFHNe2gAAAABJRU5ErkJggg=='\nconst green2 = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOsLSv4DwAFPwJkf7xuOwAAAABJRU5ErkJggg=='\nconst yellow = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/7/wPwAI5ANwEHGVPQAAAABJRU5ErkJggg=='\nconst yellow2 = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mO8cXX9fwAIRgNdOpasaAAAAABJRU5ErkJggg=='\nconst orange = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mN80S37HwAGhAKRsld48QAAAABJRU5ErkJggg=='\nconst red = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mN8rhn2HwAFzAJnxf9sDQAAAABJRU5ErkJggg=='\nconst blue = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mMMbnrxHwAFqwK+oiXE3gAAAABJRU5ErkJggg=='\nconst blue2 = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM03nvtPwAFuALHzaThLAAAAABJRU5ErkJggg=='\nconst blue3 = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkyuj5DwADYQH3Gb9KdwAAAABJRU5ErkJggg=='\nconst purple = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOcmvfiPwAGdwLsInOerQAAAABJRU5ErkJggg=='\nconst deepPurple = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNMter+DwAEYQIr1DLJIQAAAABJRU5ErkJggg=='\nconst morePurple = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOcI9v1HwAE5AJEQOnd/AAAAABJRU5ErkJggg=='\nconst pink = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP81nPmPwAIHQNPG1c/KwAAAABJRU5ErkJggg=='\nconst pink2 = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM85tf3HwAGJwKj3F8CBQAAAABJRU5ErkJggg=='\nconst gray = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOsLSv4DwAFPwJkf7xuOwAAAABJRU5ErkJggg=='\nconst red2 = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNstk38DwAEjgIiTpcmsQAAAABJRU5ErkJggg=='\nconst green3 = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM8fP/ufwAIbAOAdKkwIAAAAABJRU5ErkJggg=='\nconst orange2 = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM85tf3HwAGJwKj3F8CBQAAAABJRU5ErkJggg=='\nconst brown = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOsyAz6DwAEyAI0CG2DPQAAAABJRU5ErkJggg=='\n\nconst colors = [\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mO0Scz4DwAD7AIGykeHNgAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNsfP3lPwAHtgNhjbed3QAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mO08+/9DwAECAIbYvarOwAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mPUSjf9DwADUAHH2R4+qQAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mPsmL/9PwAGdALfLLTZgwAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mMM2FD3HwAFVQJ/wQSakQAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOcUtf+HwAF4QKaLYURggAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mO007D9DwAC8wGkgAj2wQAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mPk7Z/6HwAEFAIygk/bbQAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM85i3/HwAFQAIxwDfEwwAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mMU9Hj3HwAEAQJI0J8X3wAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNUk+f6DwACEgFQ4cywdAAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOcd/rmfwAHlANDxXJFGwAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNsSun9DwAFVwJ0Dslp5gAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNMMSz/DwAEGgINf5zfKgAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNcVZn/HwAF+gKTwpRdtAAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNcVZn/HwAF+gKTwpRdtAAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mN0z4z6DwAEFAILQQRF+gAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNMnnr4PwAF2gK8g2AjSgAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/WT+fwAI3wN/ghaxIAAAAABJRU5ErkJggg==',\n  brown, white, green, green2, red2, yellow, blue3, yellow2, orange, orange2, red, green3, pink2, blue, purple, morePurple, blue2, gray, deepPurple, pink].map(color => prefix + color)\n\nconst getRandomColor = () => colors[Math.floor(Math.random() * colors.length)]\n\nexport default getRandomColor\n","import React, { useState, useLayoutEffect, useRef, useEffect, useMemo, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport ResizeObserver from 'resize-observer-polyfill'\nimport { computeColumnLayout, computeDynamicColumns } from './layouts/columns'\nimport getRandomColor from './utils/background'\n\nfunction Gallery({ photos, onClick, margin, onLoad }) {\n  const [containerWidth, setContainerWidth] = useState(0)\n  const galleryEl = useRef(null)\n\n  useLayoutEffect(() => {\n    let animationFrameID = null\n    const observer = new ResizeObserver(entries => {\n      const newWidth = entries[0].contentRect.width\n      if (containerWidth !== newWidth) {\n        animationFrameID = window.requestAnimationFrame(() => {\n          setContainerWidth(Math.floor(newWidth))\n        })\n      }\n    })\n    observer.observe(galleryEl.current)\n    return () => {\n      observer.disconnect()\n      window.cancelAnimationFrame(animationFrameID)\n    }\n  })\n\n  const [computedPhotos, galleryStyle] = useMemo(() => {\n    const columns = computeDynamicColumns(containerWidth)\n    const computedPhotos = computeColumnLayout({ containerWidth: containerWidth - 1, columns, margin, photos })\n    const galleryStyle = { position: 'relative' }\n    if (computedPhotos.length > 0) {\n      galleryStyle.height = computedPhotos[computedPhotos.length - 1].containerHeight\n    }\n    return [computedPhotos, galleryStyle]\n  }, [containerWidth, margin, photos])\n\n  const handleClick = useCallback((event, { index }) => {\n    onClick(event, {\n      index,\n      photo: photos[index],\n      previous: photos[index - 1] || null,\n      next: photos[index + 1] || null,\n    })\n  }, [onClick, photos])\n\n  const refs = useMemo(() => Array.from({ length: photos.length }, () => React.createRef()), [photos.length])\n\n  useEffect(() => {\n    onLoad(refs.map(({ current }) => current))\n  }, [onLoad, refs])\n\n  const bgColors = useMemo(() => Array.from({ length: photos.length }, getRandomColor), [photos.length])\n\n  return (\n    <div id=\"react-gallery\" ref={galleryEl} style={galleryStyle}>\n      {computedPhotos.map((photo, index) => {\n        const { src, top, left, width, height, title, alt } = photo\n        const bgColor = bgColors[index]\n        const style = { position: 'absolute', top, left, width, height, margin, background: `url(${bgColor})` }\n        const onClick = event => { handleClick(event, { photo, index }) }\n        return (\n          <div key={src} className=\"react-photo\" style={style} onClick={onClick} >\n            <img ref={refs[index]} src={bgColor} data-original={src} width={width} height={height} alt={alt} title={title} />\n            <span>{title}</span>\n          </div>\n        )\n      })}\n    </div>\n  )\n}\n\nGallery.propTypes = {\n  photos: PropTypes.array,\n  margin: PropTypes.number,\n  onClick: PropTypes.func,\n  onLoad: PropTypes.func,\n}\n\nGallery.defaultProps = {\n  margin: 8\n}\n\nexport default React.memo(Gallery)\n","import { round } from '../utils/round'\n\n// compute sizes for column directed layouts\nexport const computeColumnLayout = ({ photos, columns, containerWidth, margin }) => {\n    // calculate each colWidth based on total width and column amount\n    let colWidth = (containerWidth - margin * 2 * columns) / columns\n\n    // map through each photo to assign adjusted height and width based on colWidth\n    const photosWithSizes = photos.map(photo => {\n        // 图片的高度  / 图片的宽度， 求出比值，然后乘以 每列的宽度， \n        const newHeight = photo.height / photo.width * colWidth\n        return {\n            ...photo,\n            width: round(colWidth, 1),\n            height: round(newHeight, 1),\n        }\n    })\n\n    // store all possible left positions\n    // and current top positions for each column\n    const colLeftPositions = []\n    const colCurrTopPositions = []\n    for (let i = 0; i < columns; i++) {\n        colLeftPositions[i] = round(i * (colWidth + margin * 2), 1)\n        colCurrTopPositions[i] = 0\n    }\n\n    // map through each photo, then reduce thru each \"column\"\n    // find column with the smallest height and assign to photo's 'top'\n    // update that column's height with this photo's height\n    const photosPositioned = photosWithSizes.map(photo => {\n        const smallestCol = colCurrTopPositions.reduce((acc, item, i) => {\n            acc = item < colCurrTopPositions[acc] ? i : acc\n            return acc\n        }, 0)\n\n        photo.top = colCurrTopPositions[smallestCol]\n        photo.left = colLeftPositions[smallestCol]\n        colCurrTopPositions[smallestCol] = colCurrTopPositions[smallestCol] + photo.height + margin * 2\n\n        // store the tallest col to use for gallery height because of abs positioned elements\n        const tallestCol = colCurrTopPositions.reduce((acc, item, i) => {\n            acc = item > colCurrTopPositions[acc] ? i : acc\n            return acc\n        }, 0)\n        photo.containerHeight = colCurrTopPositions[tallestCol]\n        return photo\n    })\n    return photosPositioned\n}\n\nexport const computeDynamicColumns = containerWidth => {\n    let columns = 1\n    if (containerWidth >= 500) columns = 2\n    if (containerWidth >= 900) columns = 3\n    if (containerWidth >= 1500) columns = 4\n    if (containerWidth >= 2200) columns = 5\n    if (containerWidth >= 3000) columns = 6\n    if (containerWidth >= 3800) columns = 7\n    if (containerWidth >= 4500) columns = 8\n    if (containerWidth >= 5300) columns = 9\n    return columns\n}","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport Carousel, { Modal, ModalGateway } from 'react-images'\n\n\nfunction Lightbox({ viewerIsOpen, photos, currentPhoto, closeLightbox }) {\n  return (\n    <ModalGateway>\n      {viewerIsOpen ? (\n        <Modal onClose={closeLightbox}>\n          <Carousel\n            currentIndex={currentPhoto}\n            views={photos.map(({ src, title, size: { height, width } }) => ({ src, caption: title, width, height }))} \n            />\n        </Modal>\n      ) : null}\n    </ModalGateway>\n  )\n}\n\nLightbox.propTypes = {\n  viewerIsOpen: PropTypes.bool,\n  photos: PropTypes.array,\n  currentPhoto: PropTypes.number,\n  closeLightbox: PropTypes.func\n}\n\nexport default React.memo(Lightbox)\n","import React from 'react'\n\nfunction Footer() {\n  return (<footer><span>© </span> 2021 <a href=\"https://tomotoes.com/\" target=\"blank\">TOMOTOES.COM</a></footer>)\n}\n\nexport default Footer\n","import React from 'react'\n\nfunction Header() {\n    return ( <header>  <span>底部原作者地址  &emsp; 本站源码来自原作者的map文件。</span><span>@</span> < a href = \"https://blog.lacknb.cn\" > https: //blog.lacknb.cn</a></header>\n    )\n}\nexport default Header","const throttle = (fn, wait) => {\n  let inThrottle, lastFn, lastTime\n  return function () {\n    const context = this\n    const args = arguments\n    if (!inThrottle) {\n      inThrottle = true\n      fn.apply(context, args)\n      lastTime = Date.now()\n      return\n    }\n\n    clearTimeout(lastFn)\n    lastFn = setTimeout(function () {\n      if (Date.now() - lastTime >= wait) {\n        fn.apply(context, args)\n        lastTime = Date.now()\n      }\n    }, Math.max(wait - (Date.now() - lastTime), 0))\n  }\n}\n\n// http://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport\nfunction isElementInViewport(el) {\n  const rect = el.getBoundingClientRect()\n  const windowHeight = (window.innerHeight || document.documentElement.clientHeight)\n  const windowWidth = (window.innerWidth || document.documentElement.clientWidth)\n\n  const vertInView = (rect.top <= windowHeight) && ((rect.top + rect.height) >= 0)\n  const horInView = (rect.left <= windowWidth) && ((rect.left + rect.width) >= 0)\n\n  const isElementPartiallyInViewport = vertInView && horInView\n  if (isElementPartiallyInViewport) { return true }\n\n  return (\n    (rect.left >= 0) &&\n    (rect.top >= 0) &&\n    ((rect.left + rect.width) <= windowWidth) &&\n    ((rect.top + rect.height) <= windowHeight)\n  )\n}\n\nfunction lazyLoad(images) {\n  if (!images || !images.length || images.every(image => !image)) { return }\n\n  const hadLoadSymbol = Array.from({ length: images.length })\n\n  function loadImage(el, index) {\n    const img = new Image()\n    const src = el.dataset.original\n\n    img.src = src\n    img.onload = function () {\n      el.classList.add('loaded')\n      el.src = src\n      hadLoadSymbol[index] = true\n    }\n    img.onerror = function () {\n      hadLoadSymbol[index] = true\n    }\n  }\n  const lazyLoadEvent = throttle(processImages, 120)\n  window.addEventListener('scroll', lazyLoadEvent, false)\n\n  function processImages() {\n    if (hadLoadSymbol.every(el => !!el)) {\n      window.removeEventListener('scroll', lazyLoadEvent)\n      return\n    }\n    for (let i = 0; i < images.length; ++i) {\n      if (!hadLoadSymbol[i] && isElementInViewport(images[i])) {\n        loadImage(images[i], i)\n      }\n    }\n  }\n  setTimeout(processImages, 0)\n}\n\nconst canUseWebP = () => {\n  const canvas = document.createElement('canvas')\n  if (canvas.getContext && canvas.getContext('2d')) {\n    // eslint-disable-next-line eqeqeq\n    return canvas.toDataURL('image/webp').indexOf('data:image/webp') == 0\n  }\n  return false\n}\n\nconst filterPhotos = photos =>\n  canUseWebP()\n    ? photos.map(({ src, ...rest }) => ({ ...rest, src: src.replace(/((.jpg)|(.jpeg)|(.png))$/, '.webp') }))\n    : photos\n\nexport { lazyLoad, filterPhotos }\n","import React, { useState, useCallback } from 'react'\nimport photos from './photos'\nimport Gallery from './components/Gallery'\nimport Lightbox from './components/Lightbox'\nimport Footer from './components/Footer'\nimport Header from './components/Header'\n\n\nimport { lazyLoad, filterPhotos } from './utils.js'\n\nconst filteredPhotos = filterPhotos(photos)\n\nfunction App() {\n  const [currentPhoto, setCurrentPhoto] = useState(0)\n  const [viewerIsOpen, setViewerIsOpen] = useState(false)\n\n  const openLightbox = useCallback((event, { photo, index }) => {\n    setCurrentPhoto(index)\n    setViewerIsOpen(true)\n  }, [])\n\n  const closeLightbox = useCallback(() => {\n    setCurrentPhoto(0)\n    setViewerIsOpen(false)\n  }, [])\n\n  return (\n    <>\n      <Header/>\n      <Gallery photos={filteredPhotos} onLoad={lazyLoad} onClick={openLightbox} />\n      <Lightbox photos={filteredPhotos} viewerIsOpen={viewerIsOpen} currentPhoto={currentPhoto} closeLightbox={closeLightbox} />\n      <Footer />\n    </>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\n\nimport App from './App.js'\n\n// 关闭严格模式  \n/* <React.StrictMode> */\nReactDOM.render( <\n    App / > ,\n    document.getElementById('root')\n)"],"sourceRoot":""}